webpackJsonp([46],{JIYu:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o("mvHQ"),l=o.n(a),i=o("NYxO"),n={name:"",data:function(){return{addDialog:!1,isLoading:!1,total:0,formLabelWidth:"120px",options:{imageTitle:"",describe:"",filename:"",tag:"",cateid:"0",imageshow:"http://image.1000da.com.cn/image/1.jpg"},uploader:{}}},computed:Object(i.b)(["uploadAppList"]),mounted:function(){},methods:{uploadApp:function(){this.addDialog=!0,this.$store.commit("setTranstionFalse"),this.uploaNode()},addSubmit:function(){var e=this;this.$http.post("http://image.1000da.com.cn/PostImage/PlayVedioUpload",l()(this.options),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){t=t.data;var o=JSON.parse(t.data),a=new AliyunUpload.Vod({onUploadFailed:function(e,t,o){console.log("onUploadFailed: file:"+e.file.name+",code:"+t+", message:"+o)},onUploadSucceed:function(e){console.log("onUploadSucceed: "+e.file.name+", endpoint:"+e.endpoint+", bucket:"+e.bucket+", object:"+e.object)},onUploadProgress:function(e,t,o){console.log("onUploadProgress:file:"+e.file.name+", fileSize:"+t+", percent:"+(100*o).toFixed(2)+"%")},onUploadTokenExpired:function(e){console.log("onUploadTokenExpired")},onUploadCanceled:function(e){console.log("onUploadCanceled:file:"+e.file.name)},onUploadstarted:function(e){e.videoId?a.setUploadAuthAndAddress(e,o.UploadAuth,o.UploadAddress):(console.log("onUploadStarted:"+e.file.name+", endpoint:"+e.endpoint+", bucket:"+e.bucket+", object:"+e.object),a.setUploadAuthAndAddress(e,o.UploadAuth,o.UploadAddress,o.VideoId))},onUploadEnd:function(e){console.log("onUploadEnd: uploaded all the files")}});e.uploaNode(a,o),console.log(o),e.addDialog=!1})},uploaNode:function(e,t){var o=this;setTimeout(function(){o.$refs.upload&&o.$refs.upload.addEventListener("change",function(){var e=o.$refs.upload.files[0];o.options.filename=e.name}),o.$refs.upload1&&o.$refs.upload1.addEventListener("change",function(){var a,l=o.$refs.upload1.files[0];a=t?'{"Vod":{"UserData":{"IsShowWaterMark":"false","Priority":"7"}}}':{Vod:{Title:o.options.imageTitle,Description:o.options.describe,CateId:"0",Tags:"",UserData:"user data"}},e&&t&&(console.log(a),e.addFile(l,null,null,null,a),o.startUpLoad(e))})},30)},startUpLoad:function(e){console.log(e),e.startUpload()}}},s={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("section",{attrs:{id:"wrap"}},[o("h1",{staticClass:"userClass",staticStyle:{"font-size":"20px","font-weight":"bold"}},[e._v("上传App")]),e._v(" "),o("el-col",{staticClass:"formSearch",attrs:{span:24}},[o("el-form",{attrs:{inline:!0}},[o("el-form-item"),e._v(" "),o("el-form-item"),e._v(" "),o("el-form-item",{staticStyle:{float:"right"}},[o("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.uploadApp}},[e._v("上传")]),e._v(" "),o("a",{staticClass:"file",attrs:{href:"javascript:;"}},[e._v("选择视频\n              "),o("input",{ref:"upload1",attrs:{type:"file",name:"",multiple:""}})])],1)],1)],1),e._v(" "),o("el-dialog",{attrs:{title:"上传App",visible:e.addDialog},on:{"update:visible":function(t){e.addDialog=t}}},[o("el-form",{attrs:{model:e.options}},[o("el-form-item",{attrs:{label:"视频标题:","label-width":e.formLabelWidth}},[o("el-input",{attrs:{placeholder:"请输入名称"},model:{value:e.options.imageTitle,callback:function(t){e.$set(e.options,"imageTitle",t)},expression:"options.imageTitle"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"视频描述:","label-width":e.formLabelWidth}},[o("el-input",{attrs:{placeholder:"请输入名称"},model:{value:e.options.describe,callback:function(t){e.$set(e.options,"describe",t)},expression:"options.describe"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"上传App:","label-width":e.formLabelWidth}},[o("a",{staticClass:"file",attrs:{href:"javascript:;"}},[e._v("上传App\n              "),o("input",{ref:"upload",attrs:{type:"file",name:"",multiple:""}})]),e._v(" "),o("p",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticStyle:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap","text-align":"center"}})])],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.addDialog=!1}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:e.addSubmit}},[e._v("确 定")])],1)],1)],1)])},staticRenderFns:[]};var d=o("VU/8")(n,s,!1,function(e){o("kbY1")},"data-v-118b771c",null);t.default=d.exports},fxaA:function(e,t,o){(e.exports=o("FZ+f")(!1)).push([e.i,"\n#wrap[data-v-118b771c]{\r\n  width: 100%;\n}\r\n",""])},kbY1:function(e,t,o){var a=o("fxaA");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);o("rjj0")("0fa6b093",a,!0)}});